<!DOCTYPE html><html lang="en"><head><title>index</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content=""><meta name="groc-document-path" content="index"><meta name="groc-project-path" content="README.md"><meta name="groc-github-url" content="https://github.com/sweetpi/pimatic"><link rel="stylesheet" type="text/css" media="all" href="assets/style.css"><link rel="stylesheet" type="text/css" media="all" href="assets/customStyle.css"><script type="text/javascript" src="assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/sweetpi/pimatic/blob/master/README.md">README.md</a></div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="pimatic-plugin-template">pimatic-plugin-template</h1>

<p>A template for creating plugins. Clone this folder from: </p>

<p><a href="https://github.com/sweetpi/pimatic-plugin-template">https://github.com/sweetpi/pimatic-plugin-template</a></p>

<h2 id="required-skills">Required Skills</h2>

<ul>
<li>You should know JavaScript and know how to write JavaScript code.</li>
<li>You should know CoffeeScript. If not learn it! It is beatiful and makes things easyer for you. 
Just read the <a href="http://coffeescript.org/">CoffeeScript introduction page</a></li>
<li>You should know <a href="http://nodejs.org/">node.js</a> and have some basic knowledge about asynchronous 
programming. If not read <a href="http://book.mixu.net/node/ch7.html">this</a></li>
<li>pimatic heavy used promises for aync operations. So check out the 
<a href="https://github.com/kriskowal/q">docs about Q promises</a>.</li>
</ul>

<p>If you like videos more:</p>

<ul>
<li><a href="http://www.youtube.com/watch?v=qR5p5s8CMBQ">Coffeescript</a></li>
<li><a href="http://www.youtube.com/watch?v=hf1T_AONQJU">About Q promises: Redemption from Callback Hell</a></li>
</ul>

<h2 id="files">Files</h2>

<ul>
<li><a href="http://sweetpi.de/pimatic/docs/pimatic-plugin-template/my-plugin.html">my-plugin.coffee</a>: 
This should become the main source file of your Plugin. It provides a short source walkthrough.</li>
<li><a href="http://sweetpi.de/pimatic/docs/pimatic-plugin-template/my-plugin-config-shema.html">my-plugin-config-shema.coffee</a>: 
Template for config definitions for your
plugin.</li>
<li><a href="http://sweetpi.de/pimatic/docs/pimatic-plugin-template/my-device-config-shema">my-device-config-shema.coffee</a>: 
Template for config definitions for a device the plugin could provide.</li>
<li>package.json: The <a href="https://npmjs.org/doc/json.html">npm package specification</a>.</li>
</ul>

<h2 id="setup-the-development-envirement">Setup the development envirement</h2>

<p>Develop on a Linux box. It makes things easyer. You can develop on the Raspberry Pi but its too 
slow. If you don't have a Linux running (how can you?) then I suggest to use VirtualBox and 
install a Ubuntu.</p>

<h3 id="instal-nodejs-and-coffeescript">Instal node.js and CoffeeScript</h3>

<ul>
<li>Install Node.js with the package manager of you distro <code>sudo apt-get install node</code> </li>
<li>Install CoffeeScript gloabaly with: <code>sudo npm install -g coffee-script</code></li>
</ul>

<h3 id="download-pimatic-for-development">Download pimatic for development</h3>

<ul>
<li>Create a folder where your development files should be in: <code>mkdir pimatic-dev</code></li>
<li>Change into this folder and <code>cd pimatic-dev</code>.</li>
<li>Run <code>npm install pimatic</code> to install the pimatic framework. The framework get installed in
<code>pimatic-dev/node_modules/pimatic</code>.</li>
<li>Copy the default config: <code>cp node_modules/pimatic/congig_default.json config.json</code></li>
<li>Make the changes you wish and add your plugin name without the <code>pimatic-</code> prefix to the plugins section.</li>
</ul>

<h3 id="setup-your-plugin">Setup your plugin</h3>

<ul>
<li>Clone this plugin template on github.</li>
<li>Chnage to the <code>pimatic-dev/node_modules</code> folder where pimatic was installed: <code>cd node_modules</code></li>
<li>Clone your repository: <code>git clone ...</code>. Your repository should now be in 
<code>pimatic-dev/node_modules/pimatic-your-plugin</code>.</li>
<li>Change into your plugin folder <code>cd pimatic-your-plugin</code> and edit the <code>package.json</code>. Take a look
at the <a href="https://npmjs.org/doc/json.html">npm package.json documentation</a> for infos.</li>
</ul>

<h3 id="adding-package-dependencies">Adding package dependencies</h3>

<ul>
<li>You can add other package dependencies by running <code>npm install something --save</code>. With the <code>--save</code>
option npm will auto add the installed dependency in your <code>package.json</code></li>
<li>You can always install all dependencies in the package.json with <code>npm install</code></li>
</ul>

<h3 id="commit-your-changes-to-git">Commit your changes to git</h3>

<ul>
<li>Add all edited files with <code>git add file</code>. For example: <code>git add package.json</code> then commit you changes 
with <code>git commit</code>.</li>
<li>After that you can push you commited work to github: <code>git push</code></li>
</ul>

<h3 id="running-pimatic-with-your-plugin">Running pimatic with your plugin</h3>

<ul>
<li>Change into the <code>pimatic-dev</code> direcotry and run <code>coffee node_modules/pimatic/pimatic.js</code>.</li>
<li>Install grunt <code>sudo npm install -g grunt-cli</code> <a href="http://gruntjs.com/getting-started">see also getting started</a> </li>
<li>For Testing run <code>grunt test</code> to execute all test files under <code>test</code> and all test files of installed
plugins under <code>pimatic-dev/node_modules/pimatic-your-plugin/test</code>. Additional <a href="http://www.coffeelint.org/">CoffeeLint</a> 
will check you source files.</li>
</ul>

<h2 id="editor--ide-setup">Editor / IDE Setup</h2>

<p>Coffescript is whitespace sensitiv so be sure to use the following editor settings:</p>

<ul>
<li>tab size: 2</li>
<li>translate tabs to spaces: true</li>
<li>max line length: 100</li>
</ul>

<p>I'm using <a href="http://www.sublimetext.com/">sublime text</a> as a editor. A example project config would be:</p>

<pre><code>{
  "folders":
  [
    {
      "path": "."
    }
  ],
  "settings":
  {
    "tab_size": 2,
    "translate_tabs_to_spaces": true,
    "rulers": [100]
  }
}
</code></pre>

<p>If you use sublime then install <a href="https://github.com/aponxi/sublime-better-coffeescript">BetterCoffee</a>.</p>

<p>Feel free to ask questions on github: 
<a href="https://github.com/sweetpi/pimatic-plugin-template/issues">https://github.com/sweetpi/pimatic-plugin-template/issues</a></p></div></div></div></div></body></html>